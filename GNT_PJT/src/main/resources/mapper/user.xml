<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="ns.sql.UserMapper">
	<resultMap type="users" id="Userreg">
	 	<result property="userId" column="user_id" jdbcType="NUMERIC" />	
	 	<result property="userName" column="user_name" jdbcType="VARCHAR" />	
	 	<result property="userPassword" column="user_password" jdbcType="VARCHAR" />
	 	<result property="userEmail" column="user_email" jdbcType="VARCHAR" />
	 </resultMap>
	 
	<update id="addInfoUser" parameterType="users">
	UPDATE users SET (user_eng_name, address)
	VALUES (#{userEngName},#{address})
	WHERE id = #{accId}
	</update>
	<select id="getUserById" parameterType="string" resultType="users">
	SELECT *
	FROM users
	WHERE id = #{userId}
	</select>
	
	<insert id="newUser" parameterType="users">
		<!-- <selectKey keyProperty="id" resultType="int" order="BEFORE">
			SELECT users_seq.nextVal FROM dual
		</selectKey> -->
		INSERT INTO
		USERS (user_id, user_password, user_name, user_email)
		VALUES (users_seq.nextVal, #{userPassword}, #{userName}, #{userEmail})
	</insert>
	
	<select id="selectUser" parameterType="users" resultMap="Userreg">
		SELECT
		USER_EMAIL, USER_PASSWORD
		FROM USERS
		WHERE USER_EMAIL=#{userEmail}
		<if test="USER_PASSWORD!=null">
			AND USER_PASSWORD=#{userPassword}
		</if>
	</select>
	
</mapper>